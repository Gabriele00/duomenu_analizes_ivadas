---
title: "Seminar 2"
author: "Justas Mundeikis"
institute: "Vilnius University (FEBA)"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
output:
  pdf_document:
    toc: true
    number_sections: true
    includes:
      in_header: header.txt
  html_document:
    toc: true
    df_print: paged
    number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE)
```

# Apie seminarą
## Seminaro tiklsai
* pasikarototi Git, Github, CLI (lieka aktualu iki pat egzamino)
* susipažinti su LSD, EUROSTAT
* Pasikaroti ir praktiškai pritaikyti paskaitų metu įgytas žinias (R 2.1 ir R 2.2)
* Toliau gilinti savo žinias rašant funkcijas

## Seminaro aptarimas:
* 2019-04-25 I ir II srautai kasrtu

## Užduotys


## Pirma funkcija
Parašykite funkciją `best`, kuri priima du argumentus: `state` - 2 ženklų ilgumo valstijos kodas, ir `outcome` ligos pavadinimas, nuskaito `outcome-of-care-measures.csv` ir pateikia character vektorių su ligoninės pavadiniu, kuriame minimos ligos mirtingumo rodiklis yra geriausias (žemiausias). Ligoninių pavadinimai yra stulpelyje: `Hospital.Name`. Galimos ligos yra:

* `heart attack`
* `heart failure`
* `pneumonia`

Vertinant ligonines, tos ligoninės, kurios neturi norimos ligos statistikos, turėtų būti pašalintos iš reitingaimo proceso.

Jeigu dvi ligoninės turi identiškai gerą statistiką pateiktai ligai, tada funkcija turi grąžinti alfabetiškai pirmą ligoninę (pvz. Raudono kryžiaus būtų pirma, Santaros klinikos antra).

Funkcijos prototipas:

```{r, eval=FALSE}
best <- function(state, outcome){
        ## nuskaityti duoemenis iš .csv failo
        
        ## patikrinti ar valstijos ir ligos pavadinimas yra teisingas, jeigu ne, gražinti pranešimą apie klaidingą įvedimą, pvz., "invalide state" arba atitinkamai "invalide outcome"
        
        ## grąžinti ligoninės pavadinimą pasirinktoje valstijoje su žemiausiu 30 dienų mirtingumo rodikliu pasirinktai ligai
}
```

Parašytą funkciją išsaugokite kaip failą "best.R"
Pastaba: norint importuoti failą "best.R" naudoti funkciją `source(best.R)`

PVZ: ka turėtų grąžinti funkcija `best.R`

```{r, eval=TRUE}
source("best.R")
best("TX", "heart attack")
best("TX", "heart failure")
best("MD", "heart attack")
best("MD", "pneumonia")
best("BB", "heart attack")
best("NY", "hert attack")
```
  
## 2 Funkcija

Parašykite funkciją `rankhospital`, kuri priima tris argumentus: `state` - 2 ženklų ilgumo valstijos kodas, ir `outcome` ligos pavadinimas bei `num`, kuris gali būti arba "best", arba "worst" arba skaitinis reitingo vietos indekso numeris. 

Galimos ligos yra:

* `heart attack`
* `heart failure`
* `pneumonia`

Vertinant ligonines, tos ligoninės, kurios neturi norimos ligos statistikos, turėtų būti pašalintos iš reitingavimo proceso. Jeigu nurodomas didesnis reitingo skaitininis numeris, funckija turėtų grąžinti "NA".

Jeigu dvi ligoninės turi identiškai gerą statistiką pateiktai ligai, tada funkcija turi grąžinti alfabetiškai pirmą ligoninę (pvz. Raudono kryžiaus būtų pirma, Santaros klinikos antra). Pagalbęti galėtų funkcija `order()`

Funkcijos prototipas:

```{r, eval=FALSE}
rankhospital <- function(state, outcome, num="best"){
        ## nuskaityti duomenis iš .csv failo
        
        ## patikrinti ar valstijos ir ligos pavadinimas yra teisingas, jeigu ne, gražinti pranešimą apie klaidingą įvedimą, pvz., "klaidinga valstija" arba atitinkamai "klaidinga liga"
        
        ## grąžinti ligoninės pavadinimą pasirinktoje valstijoje su pasirinktu 30 dienų mirtingumo reitingo rodikliu pasirinktai ligai 
}
```

Parašytą funkciją išsaugokite kaip failą "rankhospital.R"
Pastaba: norint importuoti failą "best.R" naudoti funkciją `source(rankhospital.R)`

PVZ: ka turėtų grąžinti funkcija `rankhospital.R`

```{r, eval=FALSE}
source("rankhospital.R")
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MN", "heart attack", 5000)
```


## 3 Funkcija

Parašykite funkciją `rankall`, kuri priima du argumentus: `outcome` - ligos pavadinimą bei `num`, kuris gali būti arba "best", arba "worst" arba skaitinis reitingo vietos indekso numeris. Fukcija turi grąžinti `dataframe`, kur pirmame stulpelyje sureitinguotas ligonines pagal 30 dienų mirtingumo rodiklius pasiriktai ligai. Dataframe turi sudaryti du stulpeliai `hospital` ir `state`. 

Galimos ligos yra:

* `heart attack`
* `heart failure`
* `pneumonia`

Vertinant ligonines, tos ligoninės, kurios neturi norimos ligos statistikos, turėtų būti pašalintos iš reitingavimo proceso. 

Jeigu dvi ligoninės turi identiškai gerą statistiką pateiktai ligai, tada funkcija turi grąžinti alfabetiškai pirmą ligoninę (pvz. Raudono kryžiaus būtų pirma, Santaros klinikos antra).

Funkcijos prototipas:

```{r, eval=FALSE}
rankall <- function( outcome, num="best"){
        ## nuskaityti duomenis iš .csv failo
        
        ## patikrinti ar ligos pavadinimas yra teisingas, jeigu ne, gražinti pranešimą apie klaidingą įvedimą, "klaidinga liga"
        
        ## kiekvienai valstijai surasti ligoninės pavadinimą pagal pasirinkta reitingo numerį
        
        ## grąžinti ligoninės pavadinimą ir valstijos trumpinį dataframe objekte 
}
```

Parašytą funkciją išsaugokite kaip failą "rankall.R"
Pastaba: norint importuoti failą "best.R" naudoti funkciją `source(rankall.R)`

PVZ: ka turėtų grąžinti funkcija `rankall.R`

```{r, eval=FALSE}
source("rankall.R")
head(rankall("heart attack", 20), 10)


```

